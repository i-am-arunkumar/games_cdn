var MAX_DEPTH,AI_MOVE,NUM_ROWS=3,NUM_COLS=3,NUM_SQUARES=NUM_ROWS*NUM_COLS,GAMEBOARD=Array(NUM_SQUARES),WIN_COMBOS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6],],PLAYER_CLASS="cross",COMPUTER_CLASS="nought",RUNNING=!1;function new_game(){$(".board__slot").each(function(){$(this).removeClass(PLAYER_CLASS+" player-color computer-color "+COMPUTER_CLASS)});for(var i=0;i<NUM_SQUARES;i++)GAMEBOARD[i]="";RUNNING=!0}function get_available_moves(i){return Array.apply(null,{length:NUM_SQUARES}).map(Number.call,Number).filter(function(s){return""==i[s]})}function full(i){return!get_available_moves(i).length}function wins(i,s){for(var t,n=0;n<WIN_COMBOS.length;n++){t=!0;for(var o=0;o<WIN_COMBOS[n].length;o++)i[WIN_COMBOS[n][o]]!=s&&(t=!1);if(t)return!0}return!1}function terminal(i){return full(i)||wins(i,"X")||wins(i,"O")}function score(i){return wins(i,"X")?10:wins(i,"O")?-10:0}function minimax(i,s,t){if(t>=MAX_DEPTH||terminal(i))return score(i);var n,o,r=[],e=[],a="X"==s?"O":"X",l=get_available_moves(i);for(var d in l){var c=i;c[l[d]]=s,r.push(minimax(c,a,t+1)),c[l[d]]="",e.push(l[d])}if("X"==s){for(var d in AI_MOVE=e[0],n=r[0],r)r[d]>n&&(n=r[d],AI_MOVE=e[d]);return n}for(var d in AI_MOVE=e[0],o=r[0],r)r[d]<o&&(o=r[d],AI_MOVE=e[d]);return o}$(document).ready(function(){new_game(),$(".board__settings-cog").click(function(){"hidden"==$(".board__settings").css("visibility")?$(".board__settings").css("visibility","visible"):$(".board__settings").css("visibility","hidden")}),$(".board__settings__choice-cross").click(function(){PLAYER_CLASS="cross",COMPUTER_CLASS="nought",$(".board__settings").css("visibility","hidden"),console.log("set class to cross")}),$(".board__settings__choice-nought").click(function(){PLAYER_CLASS="nought",COMPUTER_CLASS="cross",$(".board__settings").css("visibility","hidden")}),$("div[class*=board__difficulty__button]").click(function(){var i=$(this).attr("id");MAX_DEPTH="easy"===i?1:"medium"===i?3:6,$(".board__difficulty").removeClass("slideDown").addClass("slideUp"),new_game()}),$(".board__slot").click(function(){if(RUNNING){var i=Number($(this).attr("id"));""==GAMEBOARD[i]&&($(this).addClass(PLAYER_CLASS+" player-color"),GAMEBOARD[i]="X",full(GAMEBOARD)?(RUNNING=!1,$(".board__header-difficulty").html("It's a tie!"),$(".board__difficulty").removeClass("slideUp").addClass("slideDown")):wins(GAMEBOARD,"X")?(RUNNING=!1,$(".board__header-difficulty").html("You win!"),$(".board__difficulty").removeClass("slideUp").addClass("slideDown")):(minimax(GAMEBOARD,"O",0),GAMEBOARD[AI_MOVE]="O",$(".board__slot[id="+AI_MOVE+"]").addClass(COMPUTER_CLASS+" computer-color"),wins(GAMEBOARD,"O")&&(RUNNING=!1,$(".board__header-difficulty").html("You lost!"),$(".board__difficulty").removeClass("slideUp").addClass("slideDown"))))}})});
